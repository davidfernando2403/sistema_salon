<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>

<body class="bg-light">

<div class="container mt-4">

<h1 class="text-center mb-4">
ğŸ“Š Dashboard â€“ {{ nombre_mes }} ({{ titulo_quincena }})
</h1>
<div class="text-end mb-3">
    <a href="/graficos" class="btn btn-primary">
        ğŸ“Š Ver grÃ¡ficos avanzados
    </a>
</div>
<div class="text-center mb-4">
<a href="/" class="btn btn-dark">â¬… Volver</a>
</div>

<!-- ================= KPI PRINCIPALES ================= -->
<div class="row mb-4">

<div class="col-lg-3">
<div class="small-box bg-success">
<div class="inner">
<h3>S/ {{ total_mes }}</h3>
<p>Total quincena</p>
</div>
<div class="icon"><i class="fas fa-coins"></i></div>
</div>
</div>

<div class="col-lg-3">
<div class="small-box bg-info">
<div class="inner">
<h3>S/ {{ total_hoy }}</h3>
<p>Total hoy</p>
</div>
<div class="icon"><i class="fas fa-calendar-day"></i></div>
</div>
</div>

<div class="col-lg-3">
<div class="small-box bg-primary">
<div class="inner">
<h3>S/ {{ total_mes_actual }}</h3>
<p>{{ nombre_mes }}</p>
</div>
<div class="icon"><i class="fas fa-calendar"></i></div>
</div>
</div>

<div class="col-lg-3">
<div class="small-box bg-warning">
<div class="inner">
<h3>S/ {{ total_boletas_mes_actual }}</h3>
<p>Boletas {{ nombre_mes }}</p>
</div>
<div class="icon">
<i class="fas fa-receipt"></i>
</div>
</div>
</div>


</div>

<!-- ================= VENTAS RAPIDAS ================= -->
<div class="row mb-4">

<div class="col-md-4">
<div class="card shadow">
<div class="card-header bg-info text-white">ğŸ“… Ventas hoy</div>
<ul class="list-group list-group-flush">
{% for nombre, total in resumen_hoy.items() %}
<li class="list-group-item d-flex justify-content-between">{{ nombre }}<span>S/ {{ total }}</span></li>
{% endfor %}
</ul>
</div>
</div>

<div class="col-md-4">
<div class="card shadow">
<div class="card-header bg-primary text-white">ğŸ’° Ventas quincena</div>
<ul class="list-group list-group-flush">
{% for nombre, total in resumen.items() %}
<li class="list-group-item d-flex justify-content-between">{{ nombre }}<span>S/ {{ total }}</span></li>
{% endfor %}
</ul>
</div>
</div>

<div class="col-md-4">
<div class="card shadow">
<div class="card-header bg-success text-white">ğŸ’µ Comisiones</div>
<ul class="list-group list-group-flush">
{% for nombre, com in comisiones.items() %}
<li class="list-group-item d-flex justify-content-between">{{ nombre }}<span>S/ {{ com }}</span></li>
{% endfor %}
</ul>
</div>
</div>

</div>

<!-- ================= RANKING ================= -->
<div class="row mb-4">
<div class="col-md-12">
<div class="card shadow">
<div class="card-header bg-warning">ğŸ† Ranking quincena</div>
<ol class="list-group list-group-numbered list-group-flush">
{% for nombre, total in ranking %}
<li class="list-group-item d-flex justify-content-between">{{ nombre }}<span>S/ {{ total }}</span></li>
{% endfor %}
</ol>
</div>
</div>
</div>

<!-- ================= FILTROS ================= -->
<div class="row mb-4">

<div class="col-md-6">
<div class="card shadow">
<div class="card-header bg-secondary text-white">ğŸ“… Rango fechas</div>
<div class="card-body">
<form method="GET" action="/dashboard">
<input type="hidden" name="mes" value="{{ mes_sel or '' }}">
<input type="date" name="desde" class="form-control mb-2" value="{{ desde or '' }}" required>
<input type="date" name="hasta" class="form-control mb-2" value="{{ hasta or '' }}" required>
<button class="btn btn-secondary w-100">Calcular</button>
</form>

{% if total_rango %}
<div class="alert alert-info mt-3 text-center">S/ {{ total_rango }}</div>
{% endif %}
</div>
</div>
</div>

<div class="col-md-6">
<div class="card shadow">
<div class="card-header bg-dark text-white">ğŸ“† Ventas por mes</div>
<div class="card-body">
<form method="GET" action="/dashboard">
<input type="hidden" name="desde" value="{{ desde or '' }}">
<input type="hidden" name="hasta" value="{{ hasta or '' }}">
<input type="month" name="mes" class="form-control mb-2" value="{{ mes_sel or '' }}" required>
<button class="btn btn-dark w-100">Ver mes</button>
</form>

{% if total_mes_seleccionado %}
<div class="alert alert-success mt-3 text-center">S/ {{ total_mes_seleccionado }}</div>
{% endif %}
</div>
</div>
</div>


</div>

<div class="row mb-4">
    <div class="col-md-6">
<div class="card shadow">
<div class="card-header bg-primary text-white">
ğŸ“… Total por dÃ­a
</div>

<div class="card-body">

<form method="GET" action="/dashboard">

<input type="date" name="dia" class="form-control mb-2" value="{{ fecha_dia or '' }}" required>

<button class="btn btn-primary w-100">Ver dÃ­a</button>

</form>

{% if total_dia_seleccionado is not none %}
<div class="alert alert-primary mt-3 text-center">
Total dÃ­a: S/ {{ total_dia_seleccionado }}
</div>
{% endif %}

</div>
</div>
</div>

<div class="col-md-6">
<div class="card shadow">
<div class="card-header bg-success text-white">
ğŸ‘© ProducciÃ³n por trabajadora
</div>

<div class="card-body">

<form method="GET" action="/dashboard">

<select name="trabajadora_prod" class="form-control mb-2" required>
<option value="">Seleccione trabajadora</option>
{% for t in trabajadoras %}
<option value="{{ t.id }}">{{ t.nombre }}</option>
{% endfor %}
</select>

<input type="date" name="desde_prod" class="form-control mb-2" value="{{ desde_prod or '' }}" required>
<input type="date" name="hasta_prod" class="form-control mb-2" value="{{ hasta_prod or '' }}" required>

<button class="btn btn-success w-100">Calcular</button>

</form>

{% if total_produccion is not none %}
<div class="alert alert-success mt-3 text-center">
{{ nombre_trabajadora_prod }} produjo: S/ {{ total_produccion }}
</div>
{% endif %}

</div>
</div>
</div>

</div>
<!-- ================= COMPROBANTES ================= -->
<div class="row mb-4">

<div class="col-md-6">
<div class="card shadow">
<div class="card-header bg-info text-white">ğŸ§¾ Boletas</div>
<div class="card-body">
<form method="GET" action="/dashboard">
<input type="month" name="mes_boleta" class="form-control mb-2" value="{{ mes_boleta }}">
<button class="btn btn-info w-100">Ver boletas</button>
</form>

<div class="alert alert-info mt-3 text-center">
Total boletas: S/ {{ total_boletas_mes or 0 }}
</div>
</div>
</div>
</div>

<div class="col-md-6">
<div class="card shadow">
<div class="card-header bg-warning">ğŸ§¾ Facturas</div>
<div class="card-body">
<form method="GET" action="/dashboard">
<input type="month" name="mes_factura" class="form-control mb-2" value="{{ mes_factura }}">
<button class="btn btn-warning w-100">Ver facturas</button>
</form>

<div class="alert alert-warning mt-3 text-center">
Total facturas: S/ {{ total_facturas_mes or 0 }}
</div>
</div>
</div>
</div>

</div>



</div>

</body>
</html>
